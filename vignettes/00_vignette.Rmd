---
title: "00_introduction_to_cryptocompareR"
author: "Beniamino Sartini"
date: "2023-01-19"
output: html_document
---

```{r setup, include=FALSE}
# general setup 
knitr::opts_chunk$set(message=FALSE, echo = TRUE,  warning = FALSE, fig.align = "center", fig.pos = "H")

library(knitr)      # knit for `kable()`
library(rmdformats) # formattazione markdown
library(kableExtra) # create clean tables for pdf outputs 
library(cryptocompareR)
```

# Introduction to Cryptocompare Api

In order to install the development package, you can simply use the following commands.

```{r Installation, eval=FALSE}

# lightweight
remotes::install_github("beniamino98/cryptocompareR")
# or
devtools::install_github("beniamino98/cryptocompareR")

library(cryptocompareR)

```

Cryptocompare's Api is one of the most complete and reliable free Api on the market. A further advantage is that it allows to request not only daily data, but also **hourly**. No other website or Api gives the access to this kind on informations on this time frame. Moreover, with a simple email registration it is possible to obtain a **free api key** that gives you the access to even more end points. 

## Live Symbol Price

Get the current price of any cryptocurrency in any other currency that you need. If the crypto does not trade directly into the **currency** requested, BTC will be used for conversion. If the opposite pair trades we invert it (eg.: BTC-XMR)

- allow multiple symbols (e.g.: c("BTC", "ETH"))
- allow multiple currency (e.g.: c("USDT", "BUSD"))
- allow multiple exchanges (e.g.: c("Binance", "Kraken", "Coinbase"))
- the **api key** is not requested. 


```{r Example cc_symbol_price}
kab <- cc_symbol_price(symbol = c("BTC", "ETH"), currency = c("USDT", "BUSD"), exchange = c("Binance", "Kraken", "Coinbase"), api_key = NULL)

kab %>%
  kable() %>%
  kable_classic()
```

## Historical Symbol Price (OHLCV)

Get open, high, low, close, and Volume of a symbol from the daily historical data. The values are based on 00:00 GMT time.

### Example: Daily Data (1)

```{r Example1 cc_price_historical}

kab_daily <- cc_price_historical(symbol = "BTC", start = "2022-11-01", end =  "2022-12-01", exchange = NULL, currency = "USD", interval = "daily", api_key = NULL) 

kab_daily[1:5,] %>%
  kable() %>%
  kable_classic()

```
In addiction to the High, Low, Open, Close, and Volume we have added 3 more variables: 

- **Adj**: the adjusted price, that is computed as the mean price between the High, Low, Open and Close.
- **OC**: the return of the body of the candle, computed as $\frac{Close - Open}{Open}$
- **HL**: the return of the candle from the Low to High, computed as $\frac{High - Low}{Low}$

### Example: Daily Data (2)

It is possible to specify an exchange, for example *Binance* and a specific pair for the symbol searched. In the following example we search for the daily candles of the pair BTC-USDT in the Binance exchange. 

- the **api key** is not requested.

```{r Example cc_price_historical daily Binance}

kab_daily <- cc_price_historical(symbol = "BTC", start = "2022-11-01", end =  "2022-12-01", exchange = "Binance", currency = "USDT", interval = "daily", api_key = NULL) 

kab_daily[1:5,] %>%
  kable() %>%
  kable_classic()
```

### Example: Hourly Data (1)

Changing the interval to *hourly* allow to retrieve the hourly candles for the pair specified. In this case the **api key** is not requested. 

```{r Example cc_price_historical hourly}
kab_hourly <- cc_price_historical(symbol = "BTC", start = "2022-11-01", end =  "2022-12-01", exchange = NULL, currency = "USD", interval = "hourly", api_key = NULL) 

kab_hourly[1:5,] %>%
  kable() %>%
  kable_classic()
```

### Example: Minutely Data (1)

Changing the interval to *minutely* allow to retrieve the minutely data for the last 7 days. In order to get more data an api key (also with the free plan) is needed.

```{r Example cc_price_historical minutely}
kab_minutely <- cc_price_historical(symbol = "BTC", start = "2022-11-01", end =  "2022-12-01", exchange = NULL, currency = "USD", interval = "minutely", api_key = NULL) 

kab_minutely[1:5,] %>%
  kable() %>%
  kable_classic()
```




